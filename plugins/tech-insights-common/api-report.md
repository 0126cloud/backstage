## API Report File for "@backstage/plugin-tech-insights-common"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import { Config } from '@backstage/config';
import { DateTime } from 'luxon';
import { Logger as Logger_2 } from 'winston';
import { PluginEndpointDiscovery } from '@backstage/backend-common';

// @public
export interface BooleanCheckResult extends CheckResult {
  // (undocumented)
  result: boolean;
}

// @public
export interface CheckResponse {
  description: string;
  factIds: string[];
  id: string;
  metadata?: Record<string, any>;
  name: string;
  type: string;
}

// @public
export type CheckResult = {
  facts: FactResponse;
  check: CheckResponse;
};

// @public
export class CheckValidationError extends Error {
  constructor({ message, errors }: { message: string; errors?: any });
  // (undocumented)
  errors?: any;
}

// @public
export type CheckValidationResponse = {
  valid: boolean;
  message?: string;
  errors?: any;
};

// @public
export interface FactChecker<
  CheckType extends TechInsightCheck,
  CheckResultType extends CheckResult,
> {
  addCheck(check: CheckType): Promise<CheckType>;
  getChecks(): Promise<CheckType[]>;
  runChecks(entity: string, checks: string[]): Promise<CheckResultType[]>;
  validate(check: CheckType): Promise<CheckValidationResponse>;
}

// @public
export interface FactCheckerFactory<
  CheckType extends TechInsightCheck,
  CheckResultType extends CheckResult,
> {
  // (undocumented)
  construct(
    repository: TechInsightsStore,
  ): FactChecker<CheckType, CheckResultType>;
}

// @public
export type FactResponse = {
  [id: string]: {
    id: string;
    type: 'integer' | 'float' | 'string' | 'boolean' | 'datetime' | 'set';
    description: string;
    value: number | string | boolean | DateTime | [];
    since?: string;
    metadata?: Record<string, any>;
  };
};

// @public
export interface FactRetriever {
  entityTypes?: string[];
  handler: (ctx: FactRetrieverContext) => Promise<TechInsightFact[]>;
  id: string;
  schema: FactSchema;
  version: string;
}

// @public
export type FactRetrieverContext = {
  config: Config;
  discovery: PluginEndpointDiscovery;
  logger: Logger_2;
};

// @public
export type FactRetrieverRegistration = {
  factRetriever: FactRetriever;
  cadence?: string;
};

// @public
export type FactSchema = {
  [name: string]: {
    type: 'integer' | 'float' | 'string' | 'boolean' | 'datetime' | 'set';
    description: string;
    since?: string;
    metadata?: Record<string, any>;
  };
};

// Warning: (ae-missing-release-tag) "FactSchemaDefinition" is exported by the package, but it is missing a release tag (@alpha, @beta, @public, or @internal)
//
// @public (undocumented)
export type FactSchemaDefinition = Omit<FactRetriever, 'handler'>;

// @public
export type FlatTechInsightFact = TechInsightFact & {
  id: string;
};

// @public
export interface TechInsightCheck {
  description: string;
  factIds: string[];
  failureMetadata?: Record<string, any>;
  id: string;
  name: string;
  successMetadata?: Record<string, any>;
  type: string;
}

// @public
export interface TechInsightCheckRegistry<CheckType extends TechInsightCheck> {
  // (undocumented)
  get(checkId: string): Promise<CheckType>;
  // (undocumented)
  getAll(checks: string[]): Promise<CheckType[]>;
  // (undocumented)
  list(): Promise<CheckType[]>;
  // (undocumented)
  register(check: CheckType): Promise<CheckType>;
}

// @public
export type TechInsightFact = {
  entity: {
    namespace: string;
    kind: string;
    name: string;
  };
  facts: Record<
    string,
    | number
    | string
    | boolean
    | DateTime
    | number[]
    | string[]
    | boolean[]
    | DateTime[]
  >;
  timestamp?: DateTime;
};

// @public
export interface TechInsightsStore {
  getFactsBetweenTimestampsByIds(
    ids: string[],
    entity: string,
    startDateTime: DateTime,
    endDateTime: DateTime,
  ): Promise<{
    [factRef: string]: FlatTechInsightFact[];
  }>;
  // (undocumented)
  getLatestFactsByIds(
    ids: string[],
    entity: string,
  ): Promise<{
    [factRef: string]: FlatTechInsightFact;
  }>;
  getLatestSchemas(ids?: string[]): Promise<FactSchema[]>;
  insertFacts(id: string, facts: TechInsightFact[]): Promise<void>;
  insertFactSchema(schemaDefinition: FactSchemaDefinition): Promise<void>;
}

// (No @packageDocumentation comment for this package)
```
