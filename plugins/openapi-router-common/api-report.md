## API Report File for "@backstage/plugin-openapi-router"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import type { ContentObject } from 'openapi3-ts';
import core from 'express-serve-static-core';
import { FromSchema } from 'json-schema-to-ts';
import { JSONSchema7 } from 'json-schema-to-ts';
import type { OpenAPIObject } from 'openapi3-ts';
import type { ReferenceObject } from 'openapi3-ts';
import type { RequestBodyObject } from 'openapi3-ts';
import type { ResponseObject } from 'openapi3-ts';
import { Router } from 'express';

// @public
export interface ApiRouter<Doc extends RequiredDoc> extends Router {
  // (undocumented)
  all: DocRequestMatcher<Doc, this, 'all'>;
  // (undocumented)
  delete: DocRequestMatcher<Doc, this, 'delete'>;
  // (undocumented)
  get: DocRequestMatcher<Doc, this, 'get'>;
  // (undocumented)
  head: DocRequestMatcher<Doc, this, 'head'>;
  // (undocumented)
  options: DocRequestMatcher<Doc, this, 'options'>;
  // (undocumented)
  patch: DocRequestMatcher<Doc, this, 'patch'>;
  // (undocumented)
  post: DocRequestMatcher<Doc, this, 'post'>;
  // (undocumented)
  put: DocRequestMatcher<Doc, this, 'put'>;
}

// @public (undocumented)
export type ComponentRef<
  Doc extends RequiredDoc,
  Type extends ComponentTypes<Doc>,
  Ref extends ReferenceObject,
> = Ref extends {
  $ref: `#/components/${Type}/${infer Name}`;
}
  ? Name extends keyof Doc['components'][Type]
    ? Doc['components'][Type][Name] extends ReferenceObject
      ? ComponentRef<Doc, Type, Doc['components'][Type][Name]>
      : Doc['components'][Type][Name]
    : never
  : never;

// @public (undocumented)
export type ComponentTypes<Doc extends RequiredDoc> = Extract<
  keyof Doc['components'],
  string
>;

// @public (undocumented)
export type ConvertAll<T, R extends ReadonlyArray<unknown> = []> = T extends [
  infer First extends JSONSchema7,
  ...infer Rest,
]
  ? ConvertAll<Rest, [...R, FromSchema<First>]>
  : R;

// @public
export type DeepWriteable<T> = {
  -readonly [P in keyof T]: DeepWriteable<T[P]>;
};

// @public (undocumented)
export type DocOperation<
  Doc extends RequiredDoc,
  Path extends keyof Doc['paths'],
  Method extends keyof Doc['paths'][Path],
> = Doc['paths'][Path][Method];

// @public
export type DocPath<
  Doc extends PathDoc,
  Path extends PathTemplate<Extract<keyof Doc['paths'], string>>,
> = ValueOf<{
  [Template in Extract<
    keyof Doc['paths'],
    string
  >]: Path extends PathTemplate<Template> ? Template : never;
}>;

// @public (undocumented)
export type DocPathMethod<
  Doc extends Pick<RequiredDoc, 'paths'>,
  Path extends DocPathTemplate<Doc>,
> = keyof Doc['paths'][DocPath<Doc, Path>];

// @public (undocumented)
export type DocPathTemplate<Doc extends PathDoc> = PathTemplate<
  Extract<keyof Doc['paths'], string>
>;

// @public
export type DocRequestHandler<
  Doc extends RequiredDoc,
  Path extends DocPathTemplate<Doc>,
  Method extends keyof Doc['paths'][Path],
> = core.RequestHandler<
  core.ParamsDictionary,
  ResponseBodyToJsonSchema<Doc, Path, Method>,
  RequestBodyToJsonSchema<Doc, Path, Method>,
  ParsedQs,
  Record<string, string>
>;

// @public
export type DocRequestHandlerParams<
  Doc extends RequiredDoc,
  Path extends DocPathTemplate<Doc>,
  Method extends keyof Doc['paths'][Path],
> = core.RequestHandlerParams<
  core.ParamsDictionary,
  ResponseBodyToJsonSchema<Doc, Path, Method>,
  RequestBodyToJsonSchema<Doc, Path, Method>,
  ParsedQs,
  Record<string, string>
>;

// @public
export interface DocRequestMatcher<
  Doc extends RequiredDoc,
  T,
  Method extends
    | 'all'
    | 'get'
    | 'post'
    | 'put'
    | 'delete'
    | 'patch'
    | 'options'
    | 'head',
> {
  // (undocumented)
  <Path extends MethodAwareDocPath<Doc, DocPathTemplate<Doc>, Method>>(
    path: Path,
    ...handlers: Array<DocRequestHandler<Doc, Path, Method>>
  ): T;
  // (undocumented)
  <Path extends MethodAwareDocPath<Doc, DocPathTemplate<Doc>, Method>>(
    path: Path,
    ...handlers: Array<DocRequestHandlerParams<Doc, Path, Method>>
  ): T;
}

// @public (undocumented)
export type LastOf<T> = UnionToIntersection<
  T extends any ? () => T : never
> extends () => infer R
  ? R
  : never;

// @public (undocumented)
export type MethodAwareDocPath<
  Doc extends PathDoc,
  Path extends PathTemplate<Extract<keyof Doc['paths'], string>>,
  Method extends keyof Doc['paths'][Path],
> = ValueOf<{
  [Template in Extract<
    keyof Doc['paths'],
    string
  >]: Path extends PathTemplate<Template>
    ? Method extends DocPathMethod<Doc, Path>
      ? PathTemplate<Template>
      : never
    : never;
}>;

// @public (undocumented)
export type ObjectWithContentSchema<
  Doc extends RequiredDoc,
  Object extends {
    content?: ContentObject;
  },
> = Object['content'] extends ContentObject
  ? SchemaRef<Doc, Object['content']['application/json']['schema']>
  : never;

// @public
export interface ParsedQs {
  // (undocumented)
  [key: string]: undefined | string | string[] | ParsedQs | ParsedQs[];
}

// @public (undocumented)
export type PathDoc = Pick<OpenAPIObject, 'paths'>;

// @public
export type PathTemplate<Path extends string> =
  Path extends `${infer Prefix}{${string}}${infer Suffix}`
    ? `${Prefix}${string}${PathTemplate<Suffix>}`
    : Path;

// @public (undocumented)
export type Push<T extends any[], V> = [...T, V];

// @public (undocumented)
export type RequestBody<
  Doc extends RequiredDoc,
  Path extends Extract<keyof Doc['paths'], string>,
  Method extends keyof Doc['paths'][Path],
> = DocOperation<Doc, Path, Method>['requestBody'] extends ReferenceObject
  ? 'requestBodies' extends ComponentTypes<Doc>
    ? ComponentRef<
        Doc,
        'requestBodies',
        DocOperation<Doc, Path, Method>['requestBody']
      >
    : never
  : DocOperation<Doc, Path, Method>['requestBody'];

// @public (undocumented)
export type RequestBodySchema<
  Doc extends RequiredDoc,
  Path extends DocPathTemplate<Doc>,
  Method extends DocPathMethod<Doc, Path>,
> = RequestBody<Doc, DocPath<Doc, Path>, Method> extends RequestBodyObject
  ? ObjectWithContentSchema<Doc, RequestBody<Doc, DocPath<Doc, Path>, Method>>
  : never;

// @public
export type RequestBodyToJsonSchema<
  Doc extends RequiredDoc,
  Path extends PathTemplate<Extract<keyof Doc['paths'], string>>,
  Method extends DocPathMethod<Doc, Path>,
> = ToTypeSafe<RequestBodySchema<Doc, Path, Method>>;

// @public
export type RequiredDoc = Pick<OpenAPIObject, 'paths' | 'components'>;

// @public (undocumented)
type Response_2<
  Doc extends RequiredDoc,
  Path extends keyof Doc['paths'],
  Method extends keyof Doc['paths'][Path],
  StatusCode extends keyof Doc['paths'][Path]['responses'],
> = DocOperation<
  Doc,
  Path,
  Method
>['responses'][StatusCode] extends ReferenceObject
  ? 'responses' extends ComponentTypes<Doc>
    ? ComponentRef<
        Doc,
        'responses',
        DocOperation<Doc, Path, Method>['responses'][StatusCode]
      >
    : never
  : DocOperation<Doc, Path, Method>['responses'][StatusCode];
export { Response_2 as Response };

// @public
export type ResponseBodyToJsonSchema<
  Doc extends RequiredDoc,
  Path extends PathTemplate<Extract<keyof Doc['paths'], string>>,
  Method extends DocPathMethod<Doc, Path>,
> = ToTypeSafe<ValueOf<ResponseSchemas<Doc, Path, Method>>>;

// @public (undocumented)
export type Responses<
  Doc extends RequiredDoc,
  Path extends keyof Doc['paths'],
  Method extends keyof Doc['paths'][Path],
> = {
  [StatusCode in keyof DocOperation<
    Doc,
    Path,
    Method
  >['responses']]: Response_2<Doc, Path, Method, StatusCode>;
};

// @public (undocumented)
export type ResponseSchema<
  Doc extends RequiredDoc,
  Object extends ResponseObject,
> = ObjectWithContentSchema<Doc, Object>;

// @public (undocumented)
export type ResponseSchemas<
  Doc extends RequiredDoc,
  Path extends DocPathTemplate<Doc>,
  Method extends DocPathMethod<Doc, Path>,
> = {
  [StatusCode in keyof Responses<Doc, DocPath<Doc, Path>, Method>]: Responses<
    Doc,
    DocPath<Doc, Path>,
    Method
  >[StatusCode] extends ResponseObject
    ? ResponseSchema<
        Doc,
        Responses<Doc, DocPath<Doc, Path>, Method>[StatusCode]
      >
    : never;
};

// @public (undocumented)
export type SchemaRef<Doc extends RequiredDoc, Schema> = Schema extends {
  $ref: `#/components/schemas/${infer Name}`;
}
  ? 'schemas' extends keyof Doc['components']
    ? Name extends keyof Doc['components']['schemas']
      ? SchemaRef<Doc, Doc['components']['schemas'][Name]>
      : never
    : never
  : {
      [Key in keyof Schema]: SchemaRef<Doc, Schema[Key]>;
    };

// @public (undocumented)
export type ToTypeSafe<T> = UnknownIfNever<ConvertAll<TuplifyUnion<T>>[number]>;

// @public (undocumented)
export type TuplifyUnion<
  T,
  L = LastOf<T>,
  N = [T] extends [never] ? true : false,
> = true extends N ? [] : Push<TuplifyUnion<Exclude<T, L>>, L>;

// @public
export type UnionToIntersection<U> = (
  U extends any ? (k: U) => void : never
) extends (k: infer I) => void
  ? I
  : never;

// @public (undocumented)
export type UnknownIfNever<P> = [P] extends [never] ? unknown : P;

// @public
export type ValueOf<T> = T[keyof T];
```
